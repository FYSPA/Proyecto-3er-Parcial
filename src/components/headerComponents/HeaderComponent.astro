---
import GlobeAnimated from "@components/icons/GlobeAnimated.astro";
import SunAnimated from "@components/icons/SunAnimated.astro";
import MoonAnimated from "@components/icons/MoonAnimated.astro";
import SearchAnimated from "@components/icons/SearchAnimated.astro";
import HeaderComponentMovil from "@components/headerComponents/HeaderComponentMovil.astro";
import VoiceAnimated from "@components/icons/VoiceAnimated.astro";
import "@styles/global-fonts.css";
import "@styles/global-color-scheame.css";
import "@styles/media-quearys/header-media-queary.css";
---

<header>
    <div class="izquierda-header">
        <div class="contenedor-logo">
            <a href="/">
                <img src="/logoVGS.svg" alt="LogoVGS" />
            </a>
        </div>
        <nav>
            <ul>
                <li class="menu-item">
                    <button type="button">
                        Quiénes Somos
                        <span class="icono-flecha">▼</span>
                        <div class="contenedor-opciones">
                            <a class="opcion" href="/about/QuienesSomos">
                                Quienes Somos
                            </a>
                        </div>
                    </button>
                </li>

                <li>
                    <button type="button" onclick="mostrarSeccion('noticias')">
                        Noticias
                        <span class="icono-flecha">▼</span>
                        <div class="contenedor-opciones">
                            <a class="opcion" href="/news/news">Más Noticias</a>
                        </div>
                    </button>
                </li>

                <li>
                    <button type="button" onclick="mostrarSeccion('mapa')">
                        Nuestras Ubicaciones
                    </button>
                </li>
            </ul>
        </nav>
    </div>
    <div class="derecha-header">
        <button id="modoLecturaBtn">
            <div id="moonIcon">
                <MoonAnimated />
            </div>
            <div id="sunIcon" style="display: none;">
                <SunAnimated />
            </div>
        </button>
        <GlobeAnimated variant="desktop" />
        <div class="contenedor-buscador">
            <button id="start-btn"><VoiceAnimated /></button>
            <div class="icono-buscador">
                <SearchAnimated />
            </div>
            <input
                type="text"
                placeholder="Buscar"
                class="input-buscador"
                id="transcription"
                autocomplete="off"
            />
            <div id="search-results" class="search-results"></div>
        </div>
        <a href="/LoginRegisterPages/loginPage">Iniciar Sesion</a>
    </div>
</header>
<HeaderComponentMovil />

<style>
    a {
        text-decoration: none;
    }
    header {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        margin: 20px 50px 20px 50px;
        text-align: center;
        align-items: center;
        border: 1px solid rgba(110, 109, 109, 0.164);
        padding: 10px;
        border-radius: 20px;
        box-shadow: 10px 10px 34px 0px rgba(0, 0, 0, 0.75);
        -webkit-box-shadow: 10px 10px 34px 0px rgba(0, 0, 0, 0.75);
        -moz-box-shadow: 10px 10px 34px 0px rgba(0, 0, 0, 0.75);
        font-family: "Consola-regular", sans-serif;
        background-color: #ffffff;
    }

    .izquierda-header {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
    }

    .izquierda-header button {
        text-decoration: none;
        padding: 10px;
        border-radius: 10px;
        position: relative;
        display: inline-block;
        transition: all 0.3s ease;
        font-size: 16px;
    }

    .izquierda-header button:hover {
        background-color: #2d313d;
        color: white;
    }

    .izquierda-header button::after {
        content: "";
        position: absolute;
        bottom: -10px; /* Ajusta la distancia debajo del texto */
        left: 0;
        width: 0; /* Comienza sin ancho */
        height: 3px;
        background: linear-gradient(to right, #ff0000, #ff6600);
        transition: width 0.5s ease;
    }

    .izquierda-header button:hover::after {
        width: 100%; /* Se expande al hacer hover */
    }

    .izquierda-header ul {
        display: flex;
        gap: 30px;
        list-style-type: none;
    }

    .derecha-header {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        position: relative;
    }

    .input-buscador {
        border-radius: 30px;
        border: 1px solid rgb(110, 109, 109);
        background-color: transparent;
        padding: 5px 38px 5px 10px;
        margin: 10px;
    }

    .contenedor-buscador {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
    }
    .icono-buscador {
        position: absolute;
        right: 20px;
        width: 15px;
        height: 20px;
        pointer-events: none;
        z-index: 1;
    }

    .derecha-header a {
        background-color: #d13639;
        padding: 5px 20px 5px 20px;
        border-radius: 20px;
    }

    button {
        background-color: transparent;
        cursor: pointer;
        border: none;
        position: relative;
        top: 1px;
        padding: 10px;
        border-radius: 8px;
        transition: background-color 0.3s;
    }

    body.modo-oscuro button:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    button {
        color: #000000;
    }

    body.modo-oscuro button {
        color: #ffffff;
    }

    a {
        color: #000000;
    }

    body.modo-oscuro a {
        color: #ffffff;
    }

    input {
        color: #000000;
    }

    body.modo-oscuro input {
        color: #ffffff;
    }

    body.modo-oscuro header {
        background-color: #1a1a1a;
    }

    .contenedor-logo {
        position: relative;
        left: 30px;
        margin-right: 50px;
        width: 100px;
        height: 50px;
        overflow: visible;
    }

    .contenedor-logo img {
        width: 200px;
        height: auto;
        position: relative;
        top: -20px;
        left: -50px;
        transition: transform 0.3s ease;
        transition-timing-function: ease-in-out;
    }

    .contenedor-logo img:hover {
        transform: scale(1.1);
    }

    .izquierda-header button:hover .contenedor-opciones {
        opacity: 1;
        visibility: visible;
    }

    .izquierda-header button:hover .opcion {
        display: block;
    }

    .contenedor-opciones:hover {
        opacity: 1;
        visibility: visible;
    }

    .contenedor-opciones:hover .opcion {
        display: block;
    }

    .contenedor-opciones {
        position: absolute;
        top: 150%;
        left: 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid rgba(110, 109, 109, 0.164);
        min-width: 150px;
        opacity: 0;
        visibility: hidden;
        transition:
            opacity 0.3s ease,
            visibility 0.3s ease;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .opcion {
        z-index: 10;
        display: none;
        cursor: pointer;
        padding: 5px 10px;
        text-decoration: none;
        color: inherit;
        transition:
            background-color 0.2s,
            padding 0.2s;
    }

    .opcion:hover {
        background-color: #000000c5;
        border-radius: 10px;
    }

    #start-btn {
        background-color: transparent;
        cursor: pointer;
        padding: 7px;
    }

    .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        max-height: 300px;
        overflow-y: auto;
        display: none;
        margin-top: 5px;
    }

    body.modo-oscuro .search-results {
        background-color: #1a1a1a;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    :global(.search-result-item) {
        padding: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        color: black;
        text-align: left;
    }

    :global(body.modo-oscuro .search-result-item) {
        color: white;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    :global(.search-result-item:last-child) {
        border-bottom: none;
    }

    :global(.search-result-item:hover) {
        background-color: rgba(0, 0, 0, 0.05);
    }

    :global(body.modo-oscuro .search-result-item:hover) {
        background-color: rgba(255, 255, 255, 0.1);
    }

    :global(.search-result-img) {
        width: 30px;
        height: 30px;
        object-fit: cover;
        border-radius: 5px;
    }
</style>
<script is:inline>
    function mostrarSeccion(valor) {
        const esRuta = typeof valor === "string" && valor.startsWith("/");
        if (esRuta) {
            window.location.href = valor;
            return;
        }
        const id = valor;
        const enMain = window.location.pathname
            .toLowerCase()
            .includes("/mainpage");
        if (enMain) {
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: "smooth", block: "start" });
                history.replaceState(
                    null,
                    "",
                    window.location.pathname + window.location.search,
                );
            } else {
                window.location.href = `/mainPage#${id}`;
            }
        } else {
            window.location.href = `/mainPage#${id}`;
        }
    }

    document.addEventListener("astro:page-load", () => {
        const hash = window.location.hash.replace("#", "");
        if (hash) {
            const el = document.getElementById(hash);
            if (el) {
                el.scrollIntoView({ behavior: "smooth", block: "start" });
            }
            history.replaceState(
                null,
                "",
                window.location.pathname + window.location.search,
            );
        }
    });
</script>
<script type="module" src="/scripts/voz.js"></script>
<script>
    import "../../scripts-src/browser.js";
</script>
